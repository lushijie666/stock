# 股票交易策略说明文档

## 策略概览

系统现已支持 **7种** 经典交易策略，每种策略都有其独特的特点和适用场景。

| 策略名称 | 代码 | 类型 | 适用周期 | 特点 |
|---------|------|------|---------|------|
| MACD策略 | M | 趋势跟踪 | 日/周/月 | 经典动量指标，捕捉趋势转折 |
| SMA策略 | S | 趋势跟踪 | 日/周/月 | 移动平均线交叉，简单实用 |
| 海龟策略 | T | 突破 | 周/月 | 唐奇安通道突破，经典趋势跟踪 |
| CBR策略 | C | 反转 | 周/月 | 价格形态确认，捕捉反转 |
| RSI策略 | R | 超买超卖 | 日/周 | 相对强弱指标，判断超买超卖 |
| 布林带策略 | B | 波动性 | 日/周 | 统计通道，捕捉价格偏离 |
| KDJ策略 | K | 超买超卖 | 日/周 | 随机指标，灵敏度高 |

---

## 详细策略说明

### 1. MACD策略（Moving Average Convergence Divergence）

#### 原理
- MACD是Gerald Appel在1970年代发明的经典技术指标
- 通过快慢两条移动平均线的差值变化来判断趋势
- **DIFF（快线）** = 12日EMA - 26日EMA
- **DEA（慢线）** = DIFF的9日EMA
- **MACD柱** = DIFF - DEA

#### 信号规则
**买入信号（金叉）**：
- DIFF上穿DEA
- 且DIFF > 0（零轴上方，强买入）
- DIFF上升角度>30°时为强信号

**卖出信号（死叉）**：
- DIFF下穿DEA
- 若DIFF<0且DEA<0，为强卖出信号

#### 优缺点
✅ 优点：
- 跟踪中长期趋势效果好
- 信号明确，易于判断
- 适合趋势市场

❌ 缺点：
- 震荡市场会产生虚假信号
- 存在一定滞后性

---

### 2. SMA策略（Simple Moving Average）

#### 原理
- 使用多条不同周期的移动平均线
- 短期均线（5日）代表短期趋势
- 中期均线（10日、30日）代表中期趋势
- 长期均线（250日）代表长期趋势

#### 信号规则
**买入信号（金叉）**：
- 5日线上穿10日线
- 且MACD DIFF > 0 和 DEA > 0（增加确认）

**卖出信号（死叉）**：
- 10日线下破5日线
- 强信号：同时MACD DIFF下破DEA

#### 优缺点
✅ 优点：
- 简单直观，易于理解
- 适合新手使用
- 多时间框架验证

❌ 缺点：
- 滞后性较强
- 震荡市场表现不佳

---

### 3. 海龟策略（Turtle Trading）

#### 原理
- 源自1980年代著名的海龟交易实验
- 基于唐奇安通道（Donchian Channels）
- 上轨 = N日最高价
- 下轨 = N日最低价

#### 信号规则
**买入信号**：
- 收盘价突破20日上轨（入场通道）
- 使用ATR（平均真实波幅）判断强度
- 突破幅度 >= 0.5倍ATR时为强信号

**卖出信号**：
- 多头回落至10日下轨（出场通道）

#### 参数
- entry_window: 入场通道周期（默认20）
- exit_window: 出场通道周期（默认10）
- atr_period: ATR周期（默认20）

#### 优缺点
✅ 优点：
- 经过实战验证的经典策略
- 趋势跟踪能力强
- 风险控制明确

❌ 缺点：
- 震荡市场会频繁止损
- 需要较长的观察周期

---

### 4. CBR策略（Confirmation-Based Reversal）

#### 原理
- 基于价格形态和MACD的反转确认策略
- 结合K线形态判断趋势强弱

#### 信号规则
**买入信号**：
1. T-2的最高和最低 > T-1的最高和最低（价格回落）
2. T的收盘价 > T-1的最高 **或** MACD金叉

**卖出信号**：
1. T-2的最高和最低 < T-1的最高和最低（价格上涨）
2. T的收盘价 < T-1的最低 **或** MACD死叉

#### 优缺点
✅ 优点：
- 捕捉反转机会
- 双重确认降低虚假信号

❌ 缺点：
- 需要更长时间框架
- 信号较少

---

### 5. RSI策略（Relative Strength Index）★新增

#### 原理
- Welles Wilder于1978年发明
- 衡量价格变动的速度和幅度
- **RSI = 100 - (100 / (1 + RS))**
- RS = 平均涨幅 / 平均跌幅

#### 信号规则
**买入信号**：
- RSI从超卖区（<30）向上穿越30
- RSI急速上升（变化>5）时为强信号

**卖出信号**：
- RSI从超买区（>70）向下穿越70
- RSI急速下降（变化>5）时为强信号

#### 参数
- period: 计算周期（默认14）
- oversold: 超卖线（默认30）
- overbought: 超买线（默认70）

#### 优缺点
✅ 优点：
- 反应灵敏，适合短线交易
- 超买超卖判断准确
- 适合震荡市场

❌ 缺点：
- 趋势市场会过早退出
- 可能长时间处于超买/超卖区

---

### 6. 布林带策略（Bollinger Bands）★新增

#### 原理
- John Bollinger于1980年代发明
- 基于统计学标准差的动态通道
- **中轨** = N日移动平均线
- **上轨** = 中轨 + K × N日标准差
- **下轨** = 中轨 - K × N日标准差

#### 信号规则
**买入信号**：
- 价格跌破下轨后反弹
- 强买入：反弹幅度 > 2%

**卖出信号**：
- 价格突破上轨后回落
- 强卖出：回落幅度 > 2%

#### 参数
- period: 周期（默认20）
- std_dev: 标准差倍数（默认2.0）

#### 优缺点
✅ 优点：
- 动态调整，适应市场波动
- 结合价格和波动性
- 适合波段交易

❌ 缺点：
- 强趋势中通道会持续扩张
- 需要结合其他指标确认

---

### 7. KDJ策略（Stochastic Oscillator）★新增

#### 原理
- George Lane于1950年代发明
- 比较收盘价与最高最低价区间的相对位置
- **RSV** = (收盘价 - N日内最低价) / (N日内最高价 - N日内最低价) × 100
- **K值** = RSV的M1日平滑移动平均
- **D值** = K值的M2日平滑移动平均
- **J值** = 3K - 2D

#### 信号规则
**买入信号（金叉）**：
- K线上穿D线
- 强买入：K和D都在20以下（深度超卖区）

**卖出信号（死叉）**：
- K线下穿D线
- 强卖出：K和D都在80以上（深度超买区）

#### 参数
- n: RSV周期（默认9）
- m1: K线平滑参数（默认3）
- m2: D线平滑参数（默认3）
- oversold: 超卖线（默认20）
- overbought: 超买线（默认80）

#### 优缺点
✅ 优点：
- 灵敏度高，反应迅速
- 适合短线和波段交易
- J值领先指标，提前预警

❌ 缺点：
- 震荡市场信号过多
- 强趋势中会产生虚假信号

---

## 策略组合建议

### 短线交易（1-5天）
推荐组合：**RSI + KDJ**
- RSI判断超买超卖
- KDJ提供精确的买卖点

### 中线交易（5-30天）
推荐组合：**MACD + 布林带**
- MACD判断趋势方向
- 布林带提供进出场点位

### 长线交易（30天以上）
推荐组合：**SMA + 海龟策略**
- SMA确认大趋势
- 海龟策略捕捉突破机会

### 稳健型组合
推荐组合：**MACD + SMA + RSI**
- MACD判断趋势
- SMA确认趋势
- RSI避免超买超卖区域

---

## 回测指标说明

### 核心收益指标
- **初始资金**：回测起始资金
- **最终价值**：包含持仓的总资产价值
- **总收益率**：(最终价值 - 初始资金) / 初始资金 × 100%

### 交易质量指标
- **胜率**：盈利交易次数 / 总交易次数 × 100%
  - ≥60%：优秀
  - 50%-60%：良好
  - <50%：需改进

- **盈亏比**：平均盈利幅度 / 平均亏损幅度
  - ≥2：优秀（平均盈利是亏损的2倍以上）
  - 1-2：良好
  - <1：需改进

- **总交易次数**：完成的买卖对数
- **平均持股天数**：每次交易的平均持有时间

### 风险指标
- **夏普比率**：衡量风险调整后收益
  - ≥1：优秀
  - 0-1：合格
  - <0：表现不如无风险收益

- **年化波动率**：收益率的波动程度（年化）
  - <20%：低波动
  - 20%-40%：中等波动
  - >40%：高波动

- **最大回撤**：从最高点到最低点的最大跌幅
  - <10%：优秀
  - 10%-20%：良好
  - >20%：风险较高

---

## 使用建议

1. **不要依赖单一策略**
   - 建议组合2-3个策略互相验证
   - 不同策略关注不同市场特征

2. **根据市场环境选择策略**
   - 趋势市场：MACD、SMA、海龟
   - 震荡市场：RSI、KDJ、布林带
   - 反转行情：CBR

3. **注意参数调优**
   - 默认参数适合大多数情况
   - 可根据具体股票特点调整
   - 过度优化可能导致过拟合

4. **重视风险管理**
   - 胜率和盈亏比同样重要
   - 低胜率+高盈亏比也能盈利
   - 关注最大回撤，控制风险

5. **回测不代表未来**
   - 历史数据回测仅供参考
   - 市场环境会改变
   - 实盘需谨慎验证

---

## 版本更新

**v2.0 - 2025年12月**
- ✨ 新增RSI策略
- ✨ 新增布林带策略
- ✨ 新增KDJ策略
- 🎨 重构回测分析UI
- 📊 新增胜率和盈亏比指标
- 📊 改进风险指标展示

**v1.0 - 初始版本**
- MACD策略
- SMA策略
- 海龟策略
- CBR策略
